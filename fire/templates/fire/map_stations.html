{% extends 'layouts/base.html' %}

{% block title %}Fire Stations Map - Fire Management System{% endblock %}

{% block content %}
<div class="container-xxl flex-grow-1 container-p-y">
    <div class="card">
        <div class="card-header d-flex justify-content-between align-items-center">
            <h5 class="card-title mb-0">Fire Stations Map</h5>
            <a href="{% url 'fire:station_list' %}" class="btn btn-primary btn-sm">View List</a>
        </div>
        <div class="card-body">
            <div id="map" style="height: 600px;"></div>
        </div>
    </div>
</div>
{% endblock %}

{% block js %}
<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
<script>
    // Initialize the map
    var map = L.map('map').setView([14.5995, 120.9842], 11); // Manila coordinates

    // Add the OpenStreetMap tiles
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 19,
        attribution: 'Â© OpenStreetMap contributors'
    }).addTo(map);

    // Add markers for each fire station
    {% for station in stations %}
    var marker = L.marker([{{ station.latitude }}, {{ station.longitude }}]).addTo(map);
    marker.bindPopup(`
        <strong>{{ station.name }}</strong><br>
        {{ station.address }}<br>
        Contact: {{ station.contact_number }}
    `);
    {% endfor %}
</script>
{% endblock %} 